(this["webpackJsonpspotify-app"]=this["webpackJsonpspotify-app"]||[]).push([[0],{42:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(19),s=n.n(c),o=(n(41),n(42),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))}),i=n(15),u=n(21),l=n(6),j="SPOTIFY_TOKEN",p="URL_CODE",h="REFRESH_TOKEN",b="CREATE_USER",d=n(33),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,O=Object(u.c)({spotify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:null,refresh_token:null,code:null},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case j:return Object(l.a)(Object(l.a)({},e),{},{token:r.token,refresh_token:r.refresh_token});case p:return Object(l.a)(Object(l.a)({},e),{},{code:r});case h:return Object(l.a)(Object(l.a)({},e),{},{token:r});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userList:[]},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case b:return Object(l.a)(Object(l.a)({},e),{},{userList:e.userList.concat(r)});default:return e}}}),x=Object(u.e)(O,f(Object(u.a)(d.a))),y=n(4),m=n.n(y),g=n(7),v=n(9),w=n(10),k=n(12),S=n(11),C=n(20),N=n(5),T="6cee7a5f42ec413c8af5c31b8038445e",_="Basic "+btoa("".concat(T,":").concat("4f9d04fc510e49c5b228e904da1adfd1")),P="https://accounts.spotify.com/api/token",F="http://localhost:3000/",L="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(T,"&response_type=code&redirect_uri=").concat(encodeURIComponent(F),"&scope=").concat("user-read-private%20user-read-email%20user-top-read","&state=34fFs29kd09"),E=function(){var e=Object(g.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(P,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:_},body:"grant_type=refresh_token&refresh_token=".concat(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.access_token);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(g.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(P,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:_},body:"grant_type=authorization_code&code=".concat(t,"&redirect_uri=").concat(encodeURIComponent(F))});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(g.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.href=L;case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){return new URLSearchParams(document.location.search.substring(1)).get("code")},I=function(){var e=Object(g.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.spotify.com/v1/browse/categories",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(g.a)(m.a.mark((function e(t,n,r){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://api.spotify.com/v1/search?q=").concat(n,"&type=").concat(r),{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(t)}});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,console.log(c),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),U=function(){var e=Object(g.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.getState().spotify,e.next=3,E(t.refresh_token);case 3:return n=e.sent,e.next=6,x.dispatch({type:h,payload:n});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(g.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=x.getState().spotify).token){e.next=6;break}return e.next=4,B(n.token,t.query,t.type);case 4:e.next=10;break;case 6:return e.next=8,U();case 8:return e.next=10,B(n.token,t.query,t.type);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(g.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=x.getState().spotify).token){e.next=6;break}return e.next=4,I(t.token);case 4:e.next=10;break;case 6:return e.next=8,U();case 8:return e.next=10,I(t.token);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(g.a)(m.a.mark((function e(t){var n,r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?"".concat("https://server-strivify.herokuapp.com","/strivify/user?").concat(t):"".concat("https://server-strivify.herokuapp.com","/strivify/user"),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){return{type:b,payload:{username:e.username,password:e.password}}},H=function(e){return{type:j,payload:e}},J=(n(48),n(1)),X=function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"componentDidMount",value:function(){this.props.spotify.token&&z()}},{key:"render",value:function(){return Object(J.jsx)("div",{id:"home-page",children:Object(J.jsx)("button",{onClick:function(){return K()},children:"get refresh token"})})}}]),n}(r.PureComponent),V=Object(i.b)((function(e){return e}),(function(e){return{createUser:function(t){return e(M(t))},setToken:function(t){return e(H(t))}}}))(X),Y=n(58),G=(n(50),n(59)),Q=(n(51),function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.toastState,n=e.close;return Object(J.jsxs)(G.a,{style:{opacity:t?"1":"0"},children:[Object(J.jsxs)(G.a.Header,{children:[Object(J.jsx)("img",{src:"./assets/spotify.png",className:"rounded mr-2",alt:"",width:"20px",height:"20px"}),Object(J.jsx)("strong",{className:"mr-auto",children:"Strivify"}),Object(J.jsx)("button",{onClick:n,children:"x"})]}),Object(J.jsx)(G.a.Body,{children:this.props.children})]})}}]),n}(r.PureComponent)),W=function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.toggleState,n=e.toggleAction;return Object(J.jsx)("div",{className:"toggle-btn",style:{backgroundColor:t?"white":"#0d0d0d"},children:Object(J.jsx)("div",{className:"toggle",onClick:n,style:t?{backgroundColor:"#0d0d0d",marginLeft:"50%"}:{backgroundColor:"white",marginLeft:""}})})}}]),n}(a.a.PureComponent),Z=function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){return Object(J.jsx)("div",{className:"logo",children:Object(J.jsx)("img",{src:"./assets/spotify.png",alt:""})})}}]),n}(a.a.PureComponent),$=function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.search,r=e.start,a=e.show,c=e.showFilter;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("span",{className:"show-filters",onClick:a,children:"Show filters"}),Object(J.jsxs)("div",{className:"filters",style:{display:c?"":"none"},children:[Object(J.jsxs)("div",{children:[Object(J.jsx)("input",{type:"checkbox",id:"artist",onChange:t,onKeyDown:n,checked:"artist"===r})," ",Object(J.jsx)("label",{htmlFor:"artist",children:"Artist"}),Object(J.jsx)("input",{type:"checkbox",id:"album",onChange:t,onKeyDown:n})," ",Object(J.jsx)("label",{htmlFor:"album",children:"Album"})]}),Object(J.jsxs)("div",{children:[Object(J.jsx)("input",{type:"checkbox",id:"track",onChange:t,onKeyDown:n})," ",Object(J.jsx)("label",{htmlFor:"track",children:"Track"}),Object(J.jsx)("input",{type:"checkbox",id:"playlist",onChange:t,onKeyDown:n})," ",Object(J.jsx)("label",{htmlFor:"playlist",children:"Playlist"})]})]})]})}}]),n}(a.a.PureComponent),ee=function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={user:{username:null,password:null},toggle:!1,toastState:!1,start:!0,redirect:!1},e.toggle=function(){var t=!e.state.toggle;e.setState({toggle:!e.state.toggle}),t&&(e.remember(),console.log(localStorage.getItem("username")))},e.fillLogin=function(t){var n=Object(l.a)({},e.state.user);n[t.currentTarget.id]=t.currentTarget.value,e.setState({user:n}),e.state.user.password?e.toastShow():e.closeToast()},e.login=Object(g.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e.props.spotify.code);case 2:return n=t.sent,t.next=5,{token:n.access_token,refresh_token:n.refresh_token};case 5:return n=t.sent,e.props.setToken(n),t.next=9,e.setState({redirect:!0});case 9:case"end":return t.stop()}}),t)}))),e.getRefreshToken=function(){E()},e.remember=function(){localStorage.setItem("username",e.state.user.username),localStorage.setItem("password",e.state.user.password)},e.toastShow=function(){e.setState({toastState:!0})},e.closeToast=function(){e.setState({toastState:!1})},e.componentDidMount=function(){var t=R();e.props.setCode(t),t?(e.setState({start:!1}),console.log(e.props)):setTimeout((function(){e.setState({start:!1}),D()}),1800)},e}return Object(w.a)(n,[{key:"render",value:function(){var e=this;return this.state.redirect?Object(J.jsx)(N.a,{to:"/home"}):Object(J.jsx)("div",{id:"login-page",children:this.state.start?Object(J.jsx)(Z,{}):Object(J.jsxs)(Y.a,{children:[Object(J.jsxs)("header",{children:[Object(J.jsx)("img",{src:"./assets/spotify.png",alt:""}),Object(J.jsx)("span",{children:"Strivify"})]}),Object(J.jsx)("button",{id:"login-fb",children:"Log in with Facebook"}),Object(J.jsx)("div",{className:"separator",children:"Or"}),Object(J.jsx)("input",{type:"text",id:"username",placeholder:"Username",onChange:this.fillLogin}),Object(J.jsx)("input",{type:"password",id:"password",placeholder:"Password",onChange:this.fillLogin}),Object(J.jsxs)("div",{className:"remember",children:[Object(J.jsx)("span",{children:"Remember me"}),Object(J.jsx)(Q,{toastState:this.state.toastState,close:this.closeToast,children:"Click here to create an account on our database"}),Object(J.jsx)(W,{toggleState:this.state.toggle,toggleAction:this.toggle})]}),Object(J.jsx)("button",{id:"login",onClick:function(){return e.login()},children:"Log In"})]})})}}]),n}(r.PureComponent),te=Object(i.b)((function(e){return e}),(function(e){return{createUser:function(t){return e((function(e,n){e(M(t))}))},setToken:function(t){return e((function(e,n){e(H(t))}))},setCode:function(t){return e(function(e){return{type:p,payload:e}}(t))}}}))(ee),ne=n(24),re=(n(53),function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={showPlaylist:!1,toggleBar:!0,search:{query:"",type:["artist"]},startCheck:!0,showFilter:!1},e.showPlaylist=function(){e.setState({showPlaylist:!e.state.showPlaylist})},e.showSidebar=function(){e.setState({toggleBar:!e.state.toggleBar})},e.search=function(){var t=Object(g.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:13===n.keyCode||"Enter"===n.key?e.state.search.type.length>0&&K(e.state.search):(r=n.currentTarget.value,e.setState({search:{query:r,type:Object(ne.a)(e.state.search.type)}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.type=function(t){var n=Object(ne.a)(e.state.search.type),r=t.currentTarget.id;n=t.currentTarget.checked?[].concat(Object(ne.a)(e.state.search.type),[r]):n.filter((function(e){return e!==r})),console.log(n),e.setState({search:Object(l.a)(Object(l.a)({},e.state.search),{},{type:n})})},e.showFilter=function(){e.setState({showFilter:!e.state.showFilter})},e}return Object(w.a)(n,[{key:"render",value:function(){var e=this;return Object(J.jsxs)("nav",{id:"sidebar",style:{marginLeft:this.state.toggleBar?"":"-250px",display:"/"===this.props.location.pathname?"none":""},children:[Object(J.jsx)("div",{className:"toggle",onClick:function(){return e.showSidebar()}}),Object(J.jsxs)("div",{className:"logo-sidebar",children:[Object(J.jsx)("img",{src:"./assets/spotify.png",alt:""}),Object(J.jsx)("span",{children:"Strivify"})]}),Object(J.jsx)("input",{type:"text",placeholder:"Search",onChange:this.search,onKeyDown:this.search}),Object(J.jsx)($,{type:this.type,search:this.search,start:this.state.search.type[0],show:this.showFilter,showFilter:this.state.showFilter}),Object(J.jsxs)("div",{className:"menu",children:[Object(J.jsxs)("ul",{children:[Object(J.jsx)("li",{children:Object(J.jsxs)(C.b,{to:"/home",children:[Object(J.jsx)("i",{className:"fas fa-home"}),Object(J.jsx)("span",{children:"Home"})]})}),Object(J.jsx)("li",{children:Object(J.jsxs)(C.b,{to:"/library",children:[Object(J.jsx)("ion-icon",{name:"library-outline"}),Object(J.jsx)("span",{children:"Library"})]})}),Object(J.jsxs)("li",{onClick:function(){return e.showPlaylist()},children:[Object(J.jsx)("i",{className:"fas fa-plus-circle"}),Object(J.jsx)("span",{children:"Create Playlist"})]}),Object(J.jsx)("div",{id:"create-playlist",style:{display:this.state.showPlaylist?"":"none"},children:Object(J.jsx)("input",{type:"text",placeholder:"Name"})}),Object(J.jsxs)("li",{children:[Object(J.jsx)("i",{className:"fas fa-heart"}),Object(J.jsx)("span",{children:"Favourites"})]})]}),Object(J.jsxs)("div",{className:"install",children:[Object(J.jsx)("i",{className:"fas fa-arrow-alt-circle-down"}),Object(J.jsx)("span",{children:"Install"}),Object(J.jsx)("hr",{})]})]}),Object(J.jsxs)("div",{className:"login",children:[Object(J.jsx)("img",{src:"",alt:""}),Object(J.jsx)("button",{children:Object(J.jsx)("span",{children:"Log in"})})]})]})}}]),n}(r.PureComponent)),ae=Object(N.g)(Object(i.b)((function(e){return e}),(function(e){return{setRefreshToken:function(t){return e(function(e){return{type:h,payload:e}}(t))}}}))(re)),ce=n(60),se=(n(54),function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){return Object(J.jsxs)("div",{id:"player",style:{display:"/"===this.props.location.pathname?"none":""},children:[Object(J.jsxs)("div",{className:"song-info",children:[Object(J.jsx)("img",{src:"",alt:""}),Object(J.jsxs)("div",{className:"info",children:[Object(J.jsx)("p",{children:"Title"}),Object(J.jsx)("p",{children:"Album"}),Object(J.jsx)("p",{children:"Artist"})]}),Object(J.jsx)("i",{className:"far fa-heart"})]}),Object(J.jsxs)("div",{className:"main-controls",children:[Object(J.jsxs)("div",{className:"controls",children:[Object(J.jsx)("i",{className:"fas fa-random"}),Object(J.jsx)("i",{className:"fas fa-step-backward"}),Object(J.jsx)("i",{className:"fas fa-play"}),Object(J.jsx)("i",{className:"fas fa-step-forward"}),Object(J.jsx)("i",{className:"fas fa-redo"})]}),Object(J.jsxs)("div",{className:"time-bar",children:[Object(J.jsx)("span",{children:"00:00"}),Object(J.jsx)(ce.a,{variant:"success",now:20}),Object(J.jsx)("span",{children:"00:00"})]})]}),Object(J.jsxs)("div",{className:"side-controls",children:[Object(J.jsx)("i",{className:"fas fa-list"}),Object(J.jsx)("i",{className:"fas fa-volume-up"}),Object(J.jsx)(ce.a,{now:50})]})]})}}]),n}(r.PureComponent)),oe=Object(N.g)(Object(i.b)((function(e){return e}))(se)),ie=(n(55),function(e){Object(k.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=Object(g.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q();case 1:case"end":return e.stop()}}),e)}))),e}return Object(w.a)(n,[{key:"render",value:function(){return Object(J.jsxs)(C.a,{id:"router-web",children:[Object(J.jsx)(ae,{}),Object(J.jsx)(oe,{}),Object(J.jsxs)(N.d,{children:[Object(J.jsx)(N.b,{path:"/",exact:!0,render:function(e){return Object(J.jsx)(te,Object(l.a)({},e))}}),Object(J.jsx)(N.b,{path:"/home",exact:!0,render:function(e){return Object(J.jsx)(V,Object(l.a)({},e))}})]})]})}}]),n}(r.PureComponent)),ue=Object(i.b)((function(e){return e}))(ie);s.a.render(Object(J.jsx)(a.a.StrictMode,{children:Object(J.jsx)(i.a,{store:x,children:Object(J.jsx)(ue,{})})}),document.getElementById("root")),o()}},[[56,1,2]]]);
//# sourceMappingURL=main.6806dc61.chunk.js.map