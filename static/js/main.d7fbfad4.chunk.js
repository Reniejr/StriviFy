(this["webpackJsonpspotify-app"]=this["webpackJsonpspotify-app"]||[]).push([[0],{41:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),s=(n(40),n(41),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))}),i=n(18),u=n(20),l=n(6),p="SPOTIFY_TOKEN",d="URL_CODE",f="CREATE_USER",h=n(31),j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,b=Object(u.c)({spotify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:null,refresh_token:null,code:null},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case p:return Object(l.a)(Object(l.a)({},e),{},{token:r.token,refresh_token:r.refresh_token});case d:return Object(l.a)(Object(l.a)({},e),{},{code:r});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userList:[]},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case f:return Object(l.a)(Object(l.a)({},e),{},{userList:e.userList.concat(r)});default:return e}}}),O=Object(u.e)(b,j(Object(u.a)(h.a))),g=n(7),m=n.n(g),x=n(19),v=n(12),y=n(13),w=n(15),k=n(14),S=n(25),C=n(4),_=function(e){return{type:f,payload:{username:e.username,password:e.password}}},T=function(e){return{type:p,payload:e}},L="6cee7a5f42ec413c8af5c31b8038445e",P="Basic "+btoa("".concat(L,":").concat("4f9d04fc510e49c5b228e904da1adfd1")),E="https://accounts.spotify.com/api/token",I="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(L,"&response_type=code&redirect_uri=").concat("http://localhost:3000/","&scope=").concat("user-read-private%20user-read-email%20user-top-read","&state=34fFs29kd09"),N=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(E,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:P},body:"grant_type=refresh_token&refresh_token=".concat(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.access_token);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(E,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:P},body:"grant_type=authorization_code&code=".concat(t,"&redirect_uri=").concat(encodeURIComponent("http://localhost:3000/"))});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.href=I;case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){return new URLSearchParams(document.location.search.substring(1)).get("code")},D=n(55),F=(n(47),n(56)),M=(n(48),n(2)),z=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props,t=e.toastState,n=e.close;return Object(M.jsxs)(F.a,{style:{opacity:t?"1":"0"},children:[Object(M.jsxs)(F.a.Header,{children:[Object(M.jsx)("img",{src:"./assets/spotify.png",className:"rounded mr-2",alt:"",width:"20px",height:"20px"}),Object(M.jsx)("strong",{className:"mr-auto",children:"Strivify"}),Object(M.jsx)("button",{onClick:n,children:"x"})]}),Object(M.jsx)(F.a.Body,{children:this.props.children})]})}}]),n}(r.PureComponent),B=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var e=this.props,t=e.toggleState,n=e.toggleAction;return Object(M.jsx)("div",{className:"toggle-btn",style:{backgroundColor:t?"white":"#0d0d0d"},children:Object(M.jsx)("div",{className:"toggle",onClick:n,style:t?{backgroundColor:"#0d0d0d",marginLeft:"50%"}:{backgroundColor:"white",marginLeft:""}})})}}]),n}(a.a.PureComponent),J=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(M.jsx)("div",{className:"logo",children:Object(M.jsx)("img",{src:"./assets/spotify.png",alt:""})})}}]),n}(a.a.PureComponent),X=function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={user:{username:null,password:null},toggle:!1,toastState:!1,start:!0,redirect:!1},e.toggle=function(){var t=!e.state.toggle;e.setState({toggle:!e.state.toggle}),t&&(e.remember(),console.log(localStorage.getItem("username")))},e.fillLogin=function(t){var n=Object(l.a)({},e.state.user);n[t.currentTarget.id]=t.currentTarget.value,e.setState({user:n}),e.state.user.password?e.toastShow():e.closeToast()},e.login=Object(x.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(e.props.spotify.code);case 2:return n=t.sent,t.next=5,{token:n.access_token,refresh_token:n.refresh_token};case 5:return n=t.sent,e.props.setToken(n),t.next=9,e.setState({redirect:!0});case 9:case"end":return t.stop()}}),t)}))),e.getRefreshToken=function(){N()},e.remember=function(){localStorage.setItem("username",e.state.user.username),localStorage.setItem("password",e.state.user.password)},e.toastShow=function(){e.setState({toastState:!0})},e.closeToast=function(){e.setState({toastState:!1})},e.componentDidMount=function(){var t=A();e.props.setCode(t),t?(e.setState({start:!1}),console.log(e.props)):setTimeout((function(){e.setState({start:!1}),R()}),1800)},e}return Object(y.a)(n,[{key:"render",value:function(){var e=this;return this.state.redirect?Object(M.jsx)(C.a,{to:"/home"}):Object(M.jsx)("div",{id:"login-page",children:this.state.start?Object(M.jsx)(J,{}):Object(M.jsxs)(D.a,{children:[Object(M.jsxs)("header",{children:[Object(M.jsx)("img",{src:"./assets/spotify.png",alt:""}),Object(M.jsx)("span",{children:"Strivify"})]}),Object(M.jsx)("button",{id:"login-fb",children:"Log in with Facebook"}),Object(M.jsx)("div",{className:"separator",children:"Or"}),Object(M.jsx)("input",{type:"text",id:"username",placeholder:"Username",onChange:this.fillLogin}),Object(M.jsx)("input",{type:"password",id:"password",placeholder:"Password",onChange:this.fillLogin}),Object(M.jsxs)("div",{className:"remember",children:[Object(M.jsx)("span",{children:"Remember me"}),Object(M.jsx)(z,{toastState:this.state.toastState,close:this.closeToast,children:"Click here to create an account on our database"}),Object(M.jsx)(B,{toggleState:this.state.toggle,toggleAction:this.toggle})]}),Object(M.jsx)("button",{id:"login",onClick:function(){return e.login()},children:"Log In"})]})})}}]),n}(r.PureComponent),H=Object(i.b)((function(e){return e}),(function(e){return{createUser:function(t){return e((function(e,n){e(_(t))}))},setToken:function(t){return e((function(e,n){e(T(t))}))},setCode:function(t){return e(function(e){return{type:d,payload:e}}(t))}}}))(X),K=(n(51),function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var e={username:localStorage.getItem("username"),password:localStorage.getItem("password")};0===this.props.user.userList.filter((function(t){return t.username===e.username})).length&&null!==e.username&&this.props.createUser(e)}},{key:"render",value:function(){var e=this;return Object(M.jsx)("div",{id:"home-page",children:Object(M.jsx)("button",{onClick:function(){return N(e.props.spotify.token)},children:"get refresh token"})})}}]),n}(r.PureComponent)),V=Object(i.b)((function(e){return e}),(function(e){return{createUser:function(t){return e(_(t))},setToken:function(t){return e(T(t))}}}))(K),Y=(n(52),function(e){Object(w.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(v.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e}return Object(y.a)(n,[{key:"render",value:function(){return Object(M.jsx)(S.a,{id:"router-web",children:Object(M.jsxs)(C.d,{children:[Object(M.jsx)(C.b,{path:"/home",exact:!0,render:function(e){return Object(M.jsx)(V,Object(l.a)({},e))}}),Object(M.jsx)(C.b,{path:"/",exact:!0,render:function(e){return Object(M.jsx)(H,Object(l.a)({},e))}})]})})}}]),n}(r.PureComponent)),q=Object(i.b)((function(e){return e}))(Y);c.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(i.a,{store:O,children:Object(M.jsx)(q,{})})}),document.getElementById("root")),s()}},[[53,1,2]]]);
//# sourceMappingURL=main.d7fbfad4.chunk.js.map