(this["webpackJsonpspotify-app"]=this["webpackJsonpspotify-app"]||[]).push([[0],{41:function(t,e,n){},47:function(t,e,n){},49:function(t,e,n){},50:function(t,e,n){},52:function(t,e,n){},53:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(17),o=n.n(c),s=(n(40),n(41),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),r(t),a(t),c(t),o(t)}))}),i=n(19),u=n(20),l=n(7),p="SPOTIFY_TOKEN",d="URL_CODE",f="CREATE_USER",h=n(31),j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,b=Object(u.c)({spotify:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:null,refresh_token:null,code:null},e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case p:return Object(l.a)(Object(l.a)({},t),{},{token:r.token,refresh_token:r.refresh_token});case d:return Object(l.a)(Object(l.a)({},t),{},{code:r});default:return t}},user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userList:[]},e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case f:return Object(l.a)(Object(l.a)({},t),{},{userList:t.userList.concat(r)});default:return t}}}),O=Object(u.e)(b,j(Object(u.a)(h.a))),g=n(5),m=n.n(g),v=n(12),x=n(13),y=n(14),k=n(16),w=n(15),S=n(25),C=n(4),_=function(){var t=Object(v.a)(m.a.mark((function t(e){var n,r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e?"".concat("https://server-strivify.herokuapp.com","/strivify/user?").concat(e):"".concat("https://server-strivify.herokuapp.com","/strivify/user"),t.next=3,fetch(n);case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,console.log(a),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(t){return{type:f,payload:{username:t.username,password:t.password}}},L=function(t){return{type:p,payload:t}},P="6cee7a5f42ec413c8af5c31b8038445e",E="Basic "+btoa("".concat(P,":").concat("4f9d04fc510e49c5b228e904da1adfd1")),I="https://accounts.spotify.com/api/token",N="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(P,"&response_type=code&redirect_uri=").concat("http://localhost:3000/","&scope=").concat("user-read-private%20user-read-email%20user-top-read","&state=34fFs29kd09"),U=function(){var t=Object(v.a)(m.a.mark((function t(e){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(I,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:E},body:"grant_type=refresh_token&refresh_token=".concat(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r.access_token);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=Object(v.a)(m.a.mark((function t(e){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(I,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:E},body:"grant_type=authorization_code&code=".concat(e,"&redirect_uri=").concat(encodeURIComponent("http://localhost:3000/"))});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=Object(v.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.location.href=N;case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){return new URLSearchParams(document.location.search.substring(1)).get("code")},F=(n(47),n(2)),M=function(t){Object(k.a)(n,t);var e=Object(w.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"componentDidMount",value:function(){var t={username:localStorage.getItem("username"),password:localStorage.getItem("password")};0===this.props.user.userList.filter((function(e){return e.username===t.username})).length&&null!==t.username&&this.props.createUser(t)}},{key:"render",value:function(){var t=this;return Object(F.jsx)("div",{id:"home-page",children:Object(F.jsx)("button",{onClick:function(){return U(t.props.spotify.token)},children:"get refresh token"})})}}]),n}(r.PureComponent),z=Object(i.b)((function(t){return t}),(function(t){return{createUser:function(e){return t(T(e))},setToken:function(e){return t(L(e))}}}))(M),B=n(55),J=(n(49),n(56)),X=(n(50),function(t){Object(k.a)(n,t);var e=Object(w.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var t=this.props,e=t.toastState,n=t.close;return Object(F.jsxs)(J.a,{style:{opacity:e?"1":"0"},children:[Object(F.jsxs)(J.a.Header,{children:[Object(F.jsx)("img",{src:"./assets/spotify.png",className:"rounded mr-2",alt:"",width:"20px",height:"20px"}),Object(F.jsx)("strong",{className:"mr-auto",children:"Strivify"}),Object(F.jsx)("button",{onClick:n,children:"x"})]}),Object(F.jsx)(J.a.Body,{children:this.props.children})]})}}]),n}(r.PureComponent)),H=function(t){Object(k.a)(n,t);var e=Object(w.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){var t=this.props,e=t.toggleState,n=t.toggleAction;return Object(F.jsx)("div",{className:"toggle-btn",style:{backgroundColor:e?"white":"#0d0d0d"},children:Object(F.jsx)("div",{className:"toggle",onClick:n,style:e?{backgroundColor:"#0d0d0d",marginLeft:"50%"}:{backgroundColor:"white",marginLeft:""}})})}}]),n}(a.a.PureComponent),K=function(t){Object(k.a)(n,t);var e=Object(w.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"render",value:function(){return Object(F.jsx)("div",{className:"logo",children:Object(F.jsx)("img",{src:"./assets/spotify.png",alt:""})})}}]),n}(a.a.PureComponent),V=function(t){Object(k.a)(n,t);var e=Object(w.a)(n);function n(){var t;Object(x.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={user:{username:null,password:null},toggle:!1,toastState:!1,start:!0,redirect:!1},t.toggle=function(){var e=!t.state.toggle;t.setState({toggle:!t.state.toggle}),e&&(t.remember(),console.log(localStorage.getItem("username")))},t.fillLogin=function(e){var n=Object(l.a)({},t.state.user);n[e.currentTarget.id]=e.currentTarget.value,t.setState({user:n}),t.state.user.password?t.toastShow():t.closeToast()},t.login=Object(v.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t.props.spotify.code);case 2:return n=e.sent,e.next=5,{token:n.access_token,refresh_token:n.refresh_token};case 5:return n=e.sent,t.props.setToken(n),e.next=9,t.setState({redirect:!0});case 9:case"end":return e.stop()}}),e)}))),t.getRefreshToken=function(){U()},t.remember=function(){localStorage.setItem("username",t.state.user.username),localStorage.setItem("password",t.state.user.password)},t.toastShow=function(){t.setState({toastState:!0})},t.closeToast=function(){t.setState({toastState:!1})},t.componentDidMount=function(){var e=D();t.props.setCode(e),e?(t.setState({start:!1}),console.log(t.props)):setTimeout((function(){t.setState({start:!1}),A()}),1800)},t}return Object(y.a)(n,[{key:"render",value:function(){var t=this;return this.state.redirect?Object(F.jsx)(C.a,{to:"/home"}):Object(F.jsx)("div",{id:"login-page",children:this.state.start?Object(F.jsx)(K,{}):Object(F.jsxs)(B.a,{children:[Object(F.jsxs)("header",{children:[Object(F.jsx)("img",{src:"./assets/spotify.png",alt:""}),Object(F.jsx)("span",{children:"Strivify"})]}),Object(F.jsx)("button",{id:"login-fb",children:"Log in with Facebook"}),Object(F.jsx)("div",{className:"separator",children:"Or"}),Object(F.jsx)("input",{type:"text",id:"username",placeholder:"Username",onChange:this.fillLogin}),Object(F.jsx)("input",{type:"password",id:"password",placeholder:"Password",onChange:this.fillLogin}),Object(F.jsxs)("div",{className:"remember",children:[Object(F.jsx)("span",{children:"Remember me"}),Object(F.jsx)(X,{toastState:this.state.toastState,close:this.closeToast,children:"Click here to create an account on our database"}),Object(F.jsx)(H,{toggleState:this.state.toggle,toggleAction:this.toggle})]}),Object(F.jsx)("button",{id:"login",onClick:function(){return t.login()},children:"Log In"})]})})}}]),n}(r.PureComponent),Y=Object(i.b)((function(t){return t}),(function(t){return{createUser:function(e){return t((function(t,n){t(T(e))}))},setToken:function(e){return t((function(t,n){t(L(e))}))},setCode:function(e){return t(function(t){return{type:d,payload:t}}(e))}}}))(V),q=(n(52),function(t){Object(k.a)(n,t);var e=Object(w.a)(n);function n(){var t;Object(x.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).componentDidMount=Object(v.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:_();case 1:case"end":return t.stop()}}),t)}))),t}return Object(y.a)(n,[{key:"render",value:function(){return Object(F.jsx)(S.a,{id:"router-web",children:Object(F.jsxs)(C.d,{children:[Object(F.jsx)(C.b,{path:"/home",exact:!0,render:function(t){return Object(F.jsx)(z,Object(l.a)({},t))}}),Object(F.jsx)(C.b,{path:"/",exact:!0,render:function(t){return Object(F.jsx)(Y,Object(l.a)({},t))}})]})})}}]),n}(r.PureComponent)),G=Object(i.b)((function(t){return t}))(q);o.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(i.a,{store:O,children:Object(F.jsx)(G,{})})}),document.getElementById("root")),s()}},[[53,1,2]]]);
//# sourceMappingURL=main.d57e875c.chunk.js.map